{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sendMessageToContentScript = void 0;\n/**\n * Sends a message from the current window to the content script.\n *\n * @param msg The message to send.\n * @returns A Promise that resolves with the response from the content script.\n * @throws An error if GemWallet is not connected and the message type is not a connection request.\n */\nvar sendMessageToContentScript = function (msg) {\n  /*\n    In the case of multiple calls coming in sequentially, we use this MESSAGE_ID to make sure we're responding to\n    the appropriate message sender. Otherwise, we can run into race conditions where we simply resolve all\n    sent messages with the first thing that comes back.\n  */\n  var messageId = Date.now() + Math.random();\n  window.postMessage(__assign({\n    source: 'GEM_WALLET_MSG_REQUEST',\n    messageId: messageId\n  }, serializeMessage(msg)), window.location.origin);\n  return new Promise(function (resolve, reject) {\n    if (!window.gemWallet && msg.type !== 'REQUEST_IS_INSTALLED/V3') {\n      reject(new Error('Please check if GemWallet is installed - GemWallet needs to be installed: https://gemwallet.app'));\n    }\n    var messageListener = function (event) {\n      var _a, _b;\n      // We only accept messages from ourselves\n      if (event.source !== window) return;\n      // Only respond to messages tagged as being from our content script\n      if (((_a = event === null || event === void 0 ? void 0 : event.data) === null || _a === void 0 ? void 0 : _a.source) !== 'GEM_WALLET_MSG_RESPONSE') return;\n      // Only respond to messages that this instance of sendMessageToContentScript sent\n      if (((_b = event === null || event === void 0 ? void 0 : event.data) === null || _b === void 0 ? void 0 : _b.messagedId) !== messageId) return;\n      resolve(event.data);\n      window.removeEventListener('message', messageListener);\n    };\n    window.addEventListener('message', messageListener, false);\n  });\n};\nexports.sendMessageToContentScript = sendMessageToContentScript;\n/**\n * Serializes the message to be sent to the content script.\n * Fields that are objects are stringified:\n * - memos\n * - amount\n * - limitAmount\n * - flags\n * ...\n *\n * @param msg\n * @returns The message with each object field stringified.\n */\nvar serializeMessage = function (msg) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n  var modifiedMsg = __assign({}, msg);\n  if ((_a = modifiedMsg.payload) === null || _a === void 0 ? void 0 : _a.memos) {\n    modifiedMsg.payload.memos = JSON.stringify(modifiedMsg.payload.memos);\n  }\n  if ((_b = modifiedMsg.payload) === null || _b === void 0 ? void 0 : _b.signers) {\n    modifiedMsg.payload.signers = JSON.stringify(modifiedMsg.payload.signers);\n  }\n  if (typeof ((_c = modifiedMsg.payload) === null || _c === void 0 ? void 0 : _c.amount) === 'object') {\n    modifiedMsg.payload.amount = JSON.stringify(modifiedMsg.payload.amount);\n  }\n  if (typeof ((_d = modifiedMsg.payload) === null || _d === void 0 ? void 0 : _d.limitAmount) === 'object') {\n    modifiedMsg.payload.limitAmount = JSON.stringify(modifiedMsg.payload.limitAmount);\n  }\n  if (typeof ((_e = modifiedMsg.payload) === null || _e === void 0 ? void 0 : _e.takerGets) === 'object') {\n    modifiedMsg.payload.takerGets = JSON.stringify(modifiedMsg.payload.takerGets);\n  }\n  if (typeof ((_f = modifiedMsg.payload) === null || _f === void 0 ? void 0 : _f.takerPays) === 'object') {\n    modifiedMsg.payload.takerPays = JSON.stringify(modifiedMsg.payload.takerPays);\n  }\n  if (typeof ((_g = modifiedMsg.payload) === null || _g === void 0 ? void 0 : _g.NFTokenBrokerFee) === 'object') {\n    modifiedMsg.payload.NFTokenBrokerFee = JSON.stringify(modifiedMsg.payload.NFTokenBrokerFee);\n  }\n  if (typeof ((_h = modifiedMsg.payload) === null || _h === void 0 ? void 0 : _h.flags) === 'object') {\n    modifiedMsg.payload.flags = JSON.stringify(modifiedMsg.payload.flags);\n  }\n  if (typeof ((_j = modifiedMsg.payload) === null || _j === void 0 ? void 0 : _j.transaction) === 'object') {\n    modifiedMsg.payload.transaction = JSON.stringify(modifiedMsg.payload.transaction);\n  }\n  if ((_k = modifiedMsg.payload) === null || _k === void 0 ? void 0 : _k.NFTokenOffers) {\n    modifiedMsg.payload.NFTokenOffers = JSON.stringify(modifiedMsg.payload.NFTokenOffers);\n  }\n  return modifiedMsg;\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","sendMessageToContentScript","msg","messageId","Date","now","Math","random","window","postMessage","source","serializeMessage","location","origin","Promise","resolve","reject","gemWallet","type","Error","messageListener","event","_a","_b","data","messagedId","removeEventListener","addEventListener","_c","_d","_e","_f","_g","_h","_j","_k","modifiedMsg","payload","memos","JSON","stringify","signers","amount","limitAmount","takerGets","takerPays","NFTokenBrokerFee","flags","transaction","NFTokenOffers"],"sources":["/Users/meister/xrpl-hosting-dapp/frontend/node_modules/@gemwallet/api/helpers/extensionMessaging.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sendMessageToContentScript = void 0;\n/**\n * Sends a message from the current window to the content script.\n *\n * @param msg The message to send.\n * @returns A Promise that resolves with the response from the content script.\n * @throws An error if GemWallet is not connected and the message type is not a connection request.\n */\nvar sendMessageToContentScript = function (msg) {\n    /*\n      In the case of multiple calls coming in sequentially, we use this MESSAGE_ID to make sure we're responding to\n      the appropriate message sender. Otherwise, we can run into race conditions where we simply resolve all\n      sent messages with the first thing that comes back.\n    */\n    var messageId = Date.now() + Math.random();\n    window.postMessage(__assign({ source: 'GEM_WALLET_MSG_REQUEST', messageId: messageId }, serializeMessage(msg)), window.location.origin);\n    return new Promise(function (resolve, reject) {\n        if (!window.gemWallet && msg.type !== 'REQUEST_IS_INSTALLED/V3') {\n            reject(new Error('Please check if GemWallet is installed - GemWallet needs to be installed: https://gemwallet.app'));\n        }\n        var messageListener = function (event) {\n            var _a, _b;\n            // We only accept messages from ourselves\n            if (event.source !== window)\n                return;\n            // Only respond to messages tagged as being from our content script\n            if (((_a = event === null || event === void 0 ? void 0 : event.data) === null || _a === void 0 ? void 0 : _a.source) !== 'GEM_WALLET_MSG_RESPONSE')\n                return;\n            // Only respond to messages that this instance of sendMessageToContentScript sent\n            if (((_b = event === null || event === void 0 ? void 0 : event.data) === null || _b === void 0 ? void 0 : _b.messagedId) !== messageId)\n                return;\n            resolve(event.data);\n            window.removeEventListener('message', messageListener);\n        };\n        window.addEventListener('message', messageListener, false);\n    });\n};\nexports.sendMessageToContentScript = sendMessageToContentScript;\n/**\n * Serializes the message to be sent to the content script.\n * Fields that are objects are stringified:\n * - memos\n * - amount\n * - limitAmount\n * - flags\n * ...\n *\n * @param msg\n * @returns The message with each object field stringified.\n */\nvar serializeMessage = function (msg) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n    var modifiedMsg = __assign({}, msg);\n    if ((_a = modifiedMsg.payload) === null || _a === void 0 ? void 0 : _a.memos) {\n        modifiedMsg.payload.memos = JSON.stringify(modifiedMsg.payload.memos);\n    }\n    if ((_b = modifiedMsg.payload) === null || _b === void 0 ? void 0 : _b.signers) {\n        modifiedMsg.payload.signers = JSON.stringify(modifiedMsg.payload.signers);\n    }\n    if (typeof ((_c = modifiedMsg.payload) === null || _c === void 0 ? void 0 : _c.amount) === 'object') {\n        modifiedMsg.payload.amount = JSON.stringify(modifiedMsg.payload.amount);\n    }\n    if (typeof ((_d = modifiedMsg.payload) === null || _d === void 0 ? void 0 : _d.limitAmount) === 'object') {\n        modifiedMsg.payload.limitAmount = JSON.stringify(modifiedMsg.payload.limitAmount);\n    }\n    if (typeof ((_e = modifiedMsg.payload) === null || _e === void 0 ? void 0 : _e.takerGets) === 'object') {\n        modifiedMsg.payload.takerGets = JSON.stringify(modifiedMsg.payload.takerGets);\n    }\n    if (typeof ((_f = modifiedMsg.payload) === null || _f === void 0 ? void 0 : _f.takerPays) === 'object') {\n        modifiedMsg.payload.takerPays = JSON.stringify(modifiedMsg.payload.takerPays);\n    }\n    if (typeof ((_g = modifiedMsg.payload) === null || _g === void 0 ? void 0 : _g.NFTokenBrokerFee) === 'object') {\n        modifiedMsg.payload.NFTokenBrokerFee = JSON.stringify(modifiedMsg.payload.NFTokenBrokerFee);\n    }\n    if (typeof ((_h = modifiedMsg.payload) === null || _h === void 0 ? void 0 : _h.flags) === 'object') {\n        modifiedMsg.payload.flags = JSON.stringify(modifiedMsg.payload.flags);\n    }\n    if (typeof ((_j = modifiedMsg.payload) === null || _j === void 0 ? void 0 : _j.transaction) === 'object') {\n        modifiedMsg.payload.transaction = JSON.stringify(modifiedMsg.payload.transaction);\n    }\n    if ((_k = modifiedMsg.payload) === null || _k === void 0 ? void 0 : _k.NFTokenOffers) {\n        modifiedMsg.payload.NFTokenOffers = JSON.stringify(modifiedMsg.payload.NFTokenOffers);\n    }\n    return modifiedMsg;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}